## join.jsp 파일

https://github.com/user-attachments/assets/de97132d-ec93-4943-a562-cc34ce875d37

value == null일때,
공란이 비어있으면 알림창을 띄우고 해당 박스로 커서를 이동시킨다. --> !document.data.custname.value 

value == null이 아닐 때, 공란이 채워져 있다. (공란 체크 함수)-->  return checkValue() 

공란의 빈공간 여부 확인 --> function checkValue() 

알림창 --> alert("회원성명이 입력되지 않았습니다.");

해당 버스로 커서 이동 --> data.custname.focus();

공란이 비어있는지 확인 --> !document.data.custname.value

#### 기록 지우기 

1. reset 버튼 쓰기
2. 함수 reset() 함수 이용 알림창 "진짜 취소?" 같은 재 확인창 띄우기 가능
3. 페이지 재 로딩

jsp파일를 DB에 연결
--
sql 이라는 변수에 일반형 문자열를 넣는다.

conn객체 변수 선언 하여 db연결기능으로 db연결

ps객체변수 선언하여 메소드에 db연결을 넣어 번역한다. 이 과정에서 쿼리문이 생성된다.

rs에 ex..이라는 함수를 통해 sql를 실행시켜 저장한다.

rs.next에 결과값이 들어있는지를 판별

마지막으로 rs.getint(1)+1를 통해 저장되어있는 값을 불러서 그 값의 첫번째 자리의 숫자를 +1 한다.

## 홈페이지 전체코드

style.css

    @charset "UTF-8";
    *{
    	margin: 0; padding : 0;
    }
    
    a{
    	color : #ffffff;
    	text-decoration: none;
    }
    
    #header{
    	width : 100%;
    	height: 80px;
    	background-color: blue;
    	color : #ffffff;
    	text-align: center;
    	line-height : 80px;	
    }
    
    #nav{
    	width : 100%;
    	height: 40px;
    	background-color : skyblue;
    	color :#ffffff;
    	line-height:40px; 
    }
    
    nav ul li a{
    	/*일렬로 배치*/
    	float : left;
    	padding : 0 10px;
    }
    ul li{
    	/*말머리표 제거*/
    	list-style: none;
    }
    
    .section{
    	background-color:lightgray;
    	width: 100%;
    	height : 100%;
    	/*위치고정*/
    	position: fixed;
    }
    
    .section h2{
    	padding: 20px 0;
    	text-align : center;
    }
    
    /*안여백*/
    .section p{
    	padding : 10px
    }
    
    #footer{
    			width : 100%;
    			height : 30px;
    			background-color : blue;
    			color :#ffffff;
    			text-align : center;
    			line-height: 30px;	
    			font-size : 11px;
    			position: absolute; bottom:0;
    			  }
    			  
    .table_line{
    	margin: 0 auto;
    	overflow-y: auto;
    	border: 1px solid gray; 
    }
    
    .table_line th,.table_line td{
    	border: 1px solid gray;
    	padding: 5px;
    } 
    
    .table_line .center td{
    	text-align: center;
    }

index.jsp 

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>index</title>
    <link rel = "stylesheet" href = "css/style.css">
    </head>
    <body>
    	<header>
    		<jsp:include page="layout/header.jsp"></jsp:include>
    	</header>
    	<nav>
    		<jsp:include page="layout/nav.jsp"></jsp:include>
    	</nav>
    	<section>
    		<jsp:include page="layout/section.jsp"></jsp:include>
    	</section>
    	<footer>
    		<jsp:include page="layout/footer.jsp"></jsp:include>
    	</footer>
    
    </body>
    </html>

header.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>header</title>
    <link rel = "stylesheet" href = "../css/style.css">
    </head>
    <body>
    	<header id ="header">
    		<h2>쇼핑몰 회원관리 ver 1.0</h2>
    	</header>
    
    
    </body>
    </html>

nav.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>nav</title>
    <link rel="stylesheet" href="../css/style.css">
    </head>
    <body>
    	<nav id="nav">
    		<ul>
    				<li> <a href="join.jsp">회원등록</a></li>
    				<li> <a href="#">회원목록조회/수정</a></li>
    				<li> <a href="#">회원정보조회</a></li>
    				<li> <a href="#">회원매출조회</a></li>
    				<li> <a href="index.jsp">홈으로</a></li>
    		</ul>
    	</nav>
    
    </body>
    </html>

section.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>section</title>
    <link rel = "stylesheet" href = "../css/style.css">
    </head>
    <body>
    	<section class = "section">
    			<h2>쇼핑몰 회원관리 프로그램</h2>
    			<p>쇼핑몰회원관리 프로그램이다.<br>
    				프로그램 작성 순서<br>
    				1. 회원정보 테이블을 생성한다.<br>
    				2. 매출정보 테이블을 생성한다.<br>
    				3. 회원정보, 매출정보 테이블에서 제시된 문제지의 참조데이터를 추가 생성한다.<br>
    				4. 회원정보 입력 화면프로그램을 작성한다.<br>
    				5. 회원정보 조회 프로그램을 작성한다.<br>
    				6. 회원매출정보 조회 프로그램을 작성한다.<br></p>
    	</section>
    
    </body>
    </html>

footer.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>footer</title>
    <link rel="stylesheet" href="../css/style.css?abc">
    </head>
    <body>
    	<footer id="footer">
    		<p>
    		HRDKOREA Copyrightⓒ2024 All rights reserved. 
    		Human Resources Development Service of Korea
    		</p>
    	</footer>
    </body>
    </html>

## 데이터 코드

oracle.sql

    drop table member_tbl_02;
    create table member_tbl_02(
    	custno number(6) not null primary key,
    	custname varchar2(20),
    	phone varchar2(13),
    	address varchar2(60),
    	joindate date,
    	grade char(1),
    	city char(2)
    );
    
    drop table money_tbl_02;
    create table money_tbl_02(
    	custno number(6) not null,
    	salenol number(8) not null,
    	pcost number(8),
    	amount number(4),
    	price number(8),
    	pcode varchar2(4),
    	sdate date,
    	primary key(custno, salenol)
    );
    
    insert into member_tbl_02 values(100001, '김행복', '010-1111-2222', '서울 동대문구 휘경1동', '20151202', 'A', 01 );
    insert into member_tbl_02 values(100002, '이축복', '010-1111-3333', '서울 동대문구 휘경2동', '20151206', 'B', 01 );
    insert into member_tbl_02 values(100003, '장믿음', '010-1111-4444', '울릉군 울릉읍 독도1리', '20151001', 'B', 30 );
    insert into member_tbl_02 values(100004, '최사랑', '010-1111-5555', '울릉군 울릉읍 독도2리', '20151113', 'A', 30 );
    insert into member_tbl_02 values(100005, '진평화', '010-1111-6666', '제주도 제주시 외나무골', '20151225', 'B', 60 );
    
    insert into money_tbl_02 values(100001, 20160001, 500, 5, 2500, 'A001', '20160101');
    insert into money_tbl_02 values(100001, 20160002, 1000, 4, 4000, 'A002', '20160101');
    insert into money_tbl_02 values(100001, 20160003, 500, 3, 1500, 'A008', '20160101');
    insert into money_tbl_02 values(100002, 20160004, 2000, 1, 2000, 'A004', '20160102');
    insert into money_tbl_02 values(100002, 20160005, 500, 1, 500, 'A001', '20160103');
    insert into money_tbl_02 values(100003, 20160006, 1500, 2, 3000, 'A003', '20160103');
    insert into money_tbl_02 values(100004, 20160007, 500, 2, 1000, 'A001', '20160104');
    insert into money_tbl_02 values(100004, 20160008, 300, 1, 300, 'A005', '20160104');
    insert into money_tbl_02 values(100004, 20160009, 600, 1, 600, 'A006', '20160104');
    insert into money_tbl_02 values(100004, 20160010, 3000, 1, 3000, 'A007', '20160106');

## 회원등록 코드

join.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
        
    <%@ page import="DB.DBConnect" %> <%-- 지시문형식을 통해 DB연결 자바파일 불러오기 --%>
    <%@ page import="java.sql.*" %>    <%-- 지시문형식을 통해 SQL연결 자바파일 불러오기 --%>
       
     <%
     	String sql = "select max(custno) from member_tbl_02";// 퉈리문 형식의 문자열이 변수명 sql에 저장
     
    	Connection conn = DBConnect.getConnection();// DB연결 기능을 객체변수 conn에 저장 -> DB연결
    	PreparedStatement pstmt = conn.prepareStatement(sql);// sql변수에 저장되어 있는 문장이 쿼리문이 됨 -> DB연결 후 쿼리문 생성
    	ResultSet rs = pstmt.executeQuery();// 변수 pstmt에 저장되어있는 sql문을 실행하여 객체변수 rs에 저장 (select 문에서 일회성으로 사용)
    	rs.next();// 변수 rs에 결과값이 저장되는 경우 next()를 호출하여 마지막 값을 확인
    	
    	int num = rs.getInt(1) + 1;// num에는 오라클 member 테이블의 마지막 회원번호 +1 값이 정수로 저장
     %>   
        
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type ="text/css" href="css/style.css">
    <title>join</title>
    <script type="text/javascript">
    	function checkValue() {
    		if (!document.data.custname.value) {
    			alert("회원성명이 입력되지 않았습니다.");
    			data.custname.focus();
    			return false;
    		} else if (!document.data.phone.value) {
    			alert("전화번호가 입력되지 않았습니다.");
    			data.phone.focus();
    			return false;
    		} else if (!document.data.address.value) {
    			alert("주소를 입력하세요.");
    			data.address.focus();
    			return false;
    		} else if (!document.data.joindate.value) {
    			alert("가입일자를 입력하세요.");
    			data.joindate.focus();
    			return false;
    		} else if (!document.data.grade.value) {
    			alert("고객등급을 입력하세요.");
    			data.grade.focus();
    			return false;
    		} else if (!document.data.city.value) {
    			alert("도시코드를 입력하세요.");
    			data.city.focus();
    			return false;
    		} 
    		alert("회원등록이 완료 되었습니다.");
    		return true;
    	}
    	
    </script>
    </head>
    <body>
    
    <header>
    	<jsp:include page="layout/header.jsp"></jsp:include>
    </header>
    <nav>
    	<jsp:include page="layout/nav.jsp"></jsp:include>
    </nav>
    
    <section class="section">
    	<h2>홈쇼핑 회원 등록</h2>
    	
    	<form name="data" action="join_p.jsp" method="post" onsubmit="return checkValue()">
    		<table class="table_line">
    			<tr>
    				<th>회원번호(자동발생)</th>
    				<td><input type="text" name="custno" value="<%=num %>" readonly></td>
    			</tr>
    			<tr>
    				<th>회원성명</th>
    				<td><input type="text" name="custname" ></td>
    			</tr>
    			<tr>
    				<th>회원전화</th>
    				<td><input type="text" name="phone" ></td>
    			</tr>
    			<tr>
    				<th>회원주소</th>
    				<td><input type="text" name="address" ></td>
    			</tr>
    			<tr>
    				<th>가입일자</th>
    				<td><input type="text" name="joindate" ></td>
    			</tr>
    			<tr>
    				<th>고객등급[A: VIP, B: 일반, C: 직원]</th>
    				<td><input type="text" name="grade" ></td>
    			</tr>
    			<tr>
    				<th>도시코드</th>
    				<td><input type="text" name="city" ></td>
    			</tr>
    			<tr class="center">
    				<td colspan= "2">
    					<input type="submit" value="등록">
    					<input type="button" onclick="" value="취소">
    					<input type="button" value="조회">
    				</td>
    			</tr>
    		</table>
    	</form>
    </section>
    
    <footer>
    	<jsp:include page="layout/footer.jsp"></jsp:include>
    </footer>
    </body>
    </html>

join_p.jsp

    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
        
    <%@ page import="DB.DBConnect" %> <%-- 지시문형식을 통해 DB연결 자바파일 불러오기 --%>
    <%@ page import="java.sql.*" %>    <%-- 지시문형식을 통해 SQL연결 자바파일 불러오기 --%>
     
    <%
    	request.setCharacterEncoding("UTF-8"); // 오라클에 한글 입력 시 깨지지 않도록 셋팅
    	String sql ="insert into member_tbl_02 values(?,?,?,?,?,?,?)"; 
    	// sql 변수 선언 후 쿼리문형태의 문자열 저장, 삽입쿼리문에 입력 데이터 자리 7개 준비
    	
    	Connection conn = DBConnect.getConnection(); // DB 연결 기능을 객체변수 conn에 저장 -> DB연결
    	PreparedStatement pstmt = conn.prepareStatement(sql); // sql변수에 저장되어 있는 문장이 쿼리문이 됌 -> DB연결 후 쿼리문 생성
    	
    	// 화면으로부터 사용자가 입력한 회원정보 데이터 7개를 쿼리문 각 자리에 셋팅 //
    	
    	pstmt.setInt(1,Integer.parseInt(request.getParameter("custno"))); // 화면으로부터 읽어들인 데이터는 문자열이므로 숫자령으로 형변환
    	pstmt.setString(2, request.getParameter("custname"));
    	pstmt.setString(3, request.getParameter("phone"));
    	pstmt.setString(4, request.getParameter("address"));
    	pstmt.setString(5, request.getParameter("joindate"));
    	pstmt.setString(6, request.getParameter("grade"));
    	pstmt.setString(7, request.getParameter("city"));
    	
    	pstmt.executeUpdate(); // 쿼리문을 실행하고, 건 별로 오라클 테이블에 누적(select문 아님)
    %>
       
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    </head>
    <body>
    
    <!-- 데이터 입력 수행 완료 후 회원목록을 조회할 수 있는 페이지로 이동 -->
    <jsp:forward page="index.jsp"></jsp:forward>
    
    </body>
    </html>
